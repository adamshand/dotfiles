Include /Users/adam/.colima/ssh_config

Include ~/.colima/ssh_config
Include config.inkfish
#Include config.groundtruth

# https://dotfiles.tnetconsulting.net/articles/2016/0109/ssh-canonicalization.html
# if provided a hostname without a domain it will try and find it in each of these domains before trying to match the below rules
CanonicalizeHostname yes
CanonicalizeFallbackLocal no
#CanonicalDomains haume.nz
CanonicalizeMaxDots 0

Host mahoe mahoe.haume.nz
  Hostname mahoe.haume.nz
  ForwardAgent yes

Host kauri kauri.haume.nz
  Hostname kauri.haume.nz
  ForwardAgent yes

Host nikau nikau.haume.nz
  Hostname nikau.haume.nz
  ForwardAgent yes

Host github.com *.github.com
  CheckHostIP no

#Match host kauri,mahoe,nikau,whau,*.haume.nz
#  ForwardAgent yes

Match host "*.cf"
  ProxyCommand /opt/homebrew/bin/cloudflared access ssh --hostname $(echo %h | sed 's/\.cf$/.haume.nz/')
  ForwardAgent yes

Host beam beam.gnosh.net
  HostName beam.gnosh.net
  HostKeyAlgorithms ssh-rsa
  KexAlgorithms diffie-hellman-group14-sha1
  MACs hmac-sha1-96
  ForwardAgent yes
  User larry

Host maxx maxx.shmoo.com
  HostName maxx.shmoo.com
  ForwardAgent yes

Host sdf tty.sdf.org
  HostName tty.sdf.org
  User adamshand

Host *
  IgnoreUnknown UseKeychain # required or UseKeychain will barf on non-macOS
  UseKeychain yes
  AddKeysToAgent yes
  ForwardX11 no
  ForwardAgent no
  Compression yes
  CheckHostIP yes
  StrictHostKeyChecking accept-new
  VerifyHostKeyDNS yes
  #VisualHostKey yes  # nice idea but annoying
  UpdateHostKeys ask
  #ControlMaster auto
  #ControlPath ~/.ssh/sockets/%r@%h:%p
  # can't use control persist with updatehostkeys
  #ControlPersist 900
  # Via https://roll.urown.net/server/ssh-server.html
  #Ciphers chacha20-poly1305@openssh.com,aes256-gcm@openssh.com,aes128-gcm@openssh.com,aes256-ctr,aes192-ctr,aes128-ctr
  #KexAlgorithms curve25519-sha256,curve25519-sha256@libssh.org,diffie-hellman-group16-sha512,diffie-hellman-group18-sha512,diffie-hellman-group-exchange-sha256
  #MACs hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,umac-128-etm@openssh.com
  #HostKeyAlgorithms ssh-ed25519,ssh-ed25519-cert-v01@openssh.com,sk-ssh-ed25519@openssh.com,sk-ssh-ed25519-cert-v01@openssh.com,rsa-sha2-256,rsa-sha2-256-cert-v01@openssh.com,rsa-sha2-512,rsa-sha2-512-cert-v01@openssh.com

## REMINDERS

#Match User bob,joe,phil
#  PasswordAuthentication yes
#  AllowTCPForwarding yes
#  ForceCommand /bin/echo 'We talked about this guys. No SSH for you!'

#Match User ansible,backup,support Address *,!176.x.x.x                                                          
#  DenyUsers ansible,backup,support

# https://en.wikibooks.org/wiki/OpenSSH/Cookbook/Proxies_and_Jump_Hosts
#Host *,*,*
#  ProxyCommand /usr/bin/ssh -J kauri,kaka -W whau.haume.nz:22 doris
#                               delete the last two csv               format the last two csv for ProxyCommand
#  ProxyCommand /usr/bin/ssh -J $( echo %h | sed 's/,[^,]*,[^,]*$//') $( echo %h | awk -F, '{print " -W $NF:%p $(NF-1)}'" )
#  ForwardAgent yes

#Host *,*
#  ProxyCommand ssh $( echo %h | awk -F, '{print "$1, -W $2:%p}'" )
#  ForwardAgent yes

#Match host "kaka.groundtruth.co.nz" exec "ifconfig | grep -q ' 172.16.1.42 '"
#  ProxyJump kauri.haume.nz

